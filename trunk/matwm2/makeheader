use strict;
open H, "> all.h";
opendir DIR, ".";
my @dir = readdir DIR;
closedir DIR;
foreach(sort(@dir)) {
  if(m/.c$/) {
    print H "// $_\n";
    open FILE, $_;
    foreach(<FILE>) {
      if(m/^(\w+\s.+);/) {
        my $a = $1;
        $a =~ s/\s*=.+?(,)/$1/g;
        $a =~ s/\s*=.+$//g;
        print H "extern $a;\n";
      } elsif(m/^(\w[\s\w]+?\s+?\**\w+\(.*\))/) {
        print H "$1;\n";
      }
    }
    close FILE;
    print H "\n";
  }
}
close H;

